{% extends '@DdrCrudAdmin/base.html.twig' %}

{% block ddr_crud_admin_title %}{{ title }}{% endblock ddr_crud_admin_title %}

{% block ddr_crud_admin_header %}
    <h1 class="ddr-page-header">{{ title }}</h1>
{% endblock ddr_crud_admin_header %}

{% block ddr_crud_admin_content %}

    {{ knp_pagination_render(entities) }}

    {% set filterFields = [] %}
    {% for fieldDefinition in fieldDefinitions %}
        {% if fieldDefinition.filterable %}
            {% set filterFields = filterFields|merge({("entity." ~ fieldDefinition.propertyPath): fieldDefinition.label}) %}
        {% endif %}
    {% endfor %}

    {{ knp_pagination_filter(entities, filterFields) }}

    <table class="table table-sm table-bordered">
        <thead>
        <tr class="text-nowrap">
            {% for fieldDefinition in fieldDefinitions %}
                {% if fieldDefinition.sortable %}
                    <th>{{ knp_pagination_sortable(entities, fieldDefinition.label|trans({}), 'entity.'~fieldDefinition.propertyPath) }}</th>
                {% else %}
                    <th>{{ fieldDefinition.label|trans({}) }}</th>
                {% endif %}
            {% endfor %}
            {% block ddr_crud_admin_list_entity_actions_header %}
            {% endblock ddr_crud_admin_list_entity_actions_header %}
        </tr>
        </thead>
        <tbody>
        {% for entity in entities %}
            <tr>
                {% for fieldDefinition in fieldDefinitions %}
                    <td>{{ entity|ddrCrudAdminFieldDefinitionValue(fieldDefinition) }}</td>
                {% endfor %}
                {% block ddr_crud_admin_list_entity_actions %}
                {% endblock ddr_crud_admin_list_entity_actions %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock ddr_crud_admin_content %}
